{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\n$(document).ready(function () {\n    /*hierarhy list events*/\n    $(\".hierarchy_item\").on(\"click\", function (e) {\n        e.stopPropagation();\n        loadSubWokers($(this), $(this).attr(\"data-id\"));\n    });\n    $(\".hierarchy_item\").on(\"click\", \".hierarchy_item\", function (e) {\n        e.stopPropagation();\n        loadSubWokers($(this), $(this).attr(\"data-id\"));\n    });\n    /*edit photo event*/\n    $(\"#photo_file\").change(function () {\n        readURL(this);\n    });\n    /*hierarhy list sortable init*/\n    $('.itemsList').sortable({\n        connectWith: $('.itemsList'),\n        placeholder: \"ui-state-highlight\",\n        receive: function receive(event, ui) {\n            var chief_id = $(ui.item).parent().parent().attr(\"data-id\");\n            var worker_id = $(ui.item).attr(\"data-id\");\n            $.post('/update_chief', {\n                '_token': $('meta[name=csrf-token]').attr('content'),\n                'id': worker_id,\n                'chief_id': chief_id\n            });\n        }\n    });\n});\n/*loading subwokers by chief id to hierarhy list*/\nfunction loadSubWokers(el, chief) {\n    $.get(\"hierarchy/\" + chief, function (data) {\n        var result = '';\n        data.forEach(function (item, i, arr) {\n            result += '<li data-id=\"' + item.id + '\" class=\"hierarchy_item\">' + item.name + ' - ' + item.position + '<ul  class=\"itemsList\"></ul>' + '</li>';\n        });\n        el.children(\"ul\").html(result);\n        /*hierarhy list sortable init*/\n        $('.itemsList').sortable({\n            connectWith: $('.itemsList'),\n            placeholder: \"ui-state-highlight\",\n            receive: function receive(event, ui) {\n                var chief_id = $(ui.item).parent().parent().attr(\"data-id\");\n                var worker_id = $(ui.item).attr(\"data-id\");\n                $.post('/update_chief', {\n                    '_token': $('meta[name=csrf-token]').attr('content'),\n                    'id': worker_id,\n                    'chief_id': chief_id\n                });\n            }\n        });\n    });\n}\n/*show image file to load*/\nfunction readURL(input) {\n    if (input.files && input.files[0]) {\n        var reader = new FileReader();\n        reader.onload = function (e) {\n            $(\"#preview\").css('background-image', 'url(' + e.target.result + ')');\n        };\n        reader.readAsDataURL(input.files[0]);\n    }\n}\n/*angular getting data for admin table*/\nangular.module('sortTable', [], function ($interpolateProvider) {\n    $interpolateProvider.startSymbol('<%');\n    $interpolateProvider.endSymbol('%>');\n}).controller('mainController', function ($scope, $http) {\n    $scope.sortType = 'id'; // set the default sort type\n    $scope.sortReverse = false; // set the default sort order\n    $scope.searchFish = ''; // set the default search/filter term\n\n    // get workers list\n    $http.get(\"workers\").then(function (response) {\n        $scope.workers = response.data;\n    });\n});\n\n},{}]},{},[1]);\n"],"file":"app.js"}